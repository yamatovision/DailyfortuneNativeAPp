<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>コンテキスト管理フロー</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Roboto', sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #9c27b0;
        }
        
        .flow-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 40px;
        }
        
        .step {
            display: flex;
            flex-direction: column;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        .step-header {
            background: linear-gradient(120deg, #9c27b0, #7b1fa2);
            color: white;
            padding: 15px 20px;
            font-size: 18px;
            font-weight: 500;
            display: flex;
            align-items: center;
        }
        
        .step-header .material-icons {
            margin-right: 10px;
        }
        
        .step-header .step-number {
            background-color: white;
            color: #9c27b0;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
        }
        
        .step-content {
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .step-description {
            font-size: 16px;
            color: #616161;
            margin-bottom: 10px;
        }
        
        .mockup-container {
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 1px 5px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
            position: relative;
        }
        
        .mockup {
            width: 100%;
            max-width: 375px;
            background-color: #fcf7ff;
            margin: 0 auto;
        }
        
        .mockup-header {
            background: linear-gradient(120deg, #9c27b0, #7b1fa2);
            color: white;
            padding: 16px;
            display: flex;
            align-items: center;
            position: relative;
        }
        
        .mockup-back-button {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 8px;
        }
        
        .mockup-title {
            flex-grow: 1;
            text-align: center;
            font-weight: 400;
            font-size: 18px;
        }
        
        .mockup-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .mockup-badge-number {
            position: absolute;
            top: -5px;
            right: -5px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background-color: #4caf50;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            border: 2px solid white;
        }
        
        .context-tags {
            display: flex;
            padding: 8px 16px;
            background-color: white;
            overflow-x: auto;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .context-tag {
            display: flex;
            align-items: center;
            padding: 4px 12px;
            background-color: #f0f0f0;
            color: #616161;
            border-radius: 16px;
            margin-right: 8px;
            white-space: nowrap;
            font-size: 14px;
        }
        
        .context-tag.active {
            background-color: #9c27b0;
            color: white;
        }
        
        .context-tag i {
            font-size: 16px;
            margin-right: 4px;
        }
        
        .context-tag .remove {
            margin-left: 4px;
            font-size: 14px;
        }
        
        .chat-content {
            height: 300px;
            overflow-y: auto;
            background-color: #f8f0ff;
            display: flex;
            flex-direction: column;
            padding: 16px;
        }
        
        .message {
            max-width: 80%;
            padding: 12px;
            border-radius: 18px;
            margin-bottom: 12px;
        }
        
        .message.user {
            align-self: flex-end;
            background-color: #9c27b0;
            color: white;
            border-bottom-right-radius: 4px;
        }
        
        .message.assistant {
            align-self: flex-start;
            background-color: white;
            color: #333;
            border-bottom-left-radius: 4px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .input-area {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            background-color: white;
            border-top: 1px solid #f0f0f0;
        }
        
        .context-button {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 8px;
            position: relative;
        }
        
        .context-button-wrapper {
            position: relative;
        }
        
        .context-button-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background-color: #9c27b0;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .context-button-plus {
            position: absolute;
            bottom: -2px;
            right: -2px;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background-color: #4caf50;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            border: 1px solid white;
        }
        
        .input-field {
            flex-grow: 1;
            padding: 10px 16px;
            border-radius: 20px;
            border: 1px solid #e0e0e0;
            background-color: #f5f5f5;
            font-size: 14px;
        }
        
        .send-button {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: #9c27b0;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 8px;
        }
        
        /* ポップアップメニュー用スタイル */
        .popup-menu {
            position: absolute;
            bottom: 56px;
            left: 16px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            width: 250px;
            overflow: hidden;
            z-index: 10;
        }
        
        .popup-menu-tabs {
            display: flex;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .popup-menu-tab {
            flex: 1;
            padding: 12px 8px;
            text-align: center;
            font-size: 14px;
            font-weight: 500;
            color: #616161;
            cursor: pointer;
        }
        
        .popup-menu-tab.active {
            color: #9c27b0;
            border-bottom: 2px solid #9c27b0;
        }
        
        .popup-menu-content {
            max-height: 250px;
            overflow-y: auto;
            padding: 8px;
        }
        
        .popup-menu-item {
            display: flex;
            align-items: center;
            padding: 8px;
            border-radius: 4px;
            margin-bottom: 4px;
        }
        
        .popup-menu-item:hover {
            background-color: #f5f5f5;
        }
        
        .popup-menu-item-icon {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            color: white;
        }
        
        .popup-menu-item-icon.friend {
            background-color: #2196f3;
        }
        
        .popup-menu-item-icon.fortune {
            background-color: #ff9800;
        }
        
        .popup-menu-item-icon.team {
            background-color: #4caf50;
        }
        
        .popup-menu-item-label {
            font-size: 14px;
            color: #333;
        }
        
        /* コンテキスト詳細モーダル */
        .context-detail-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .context-detail-card {
            width: 90%;
            max-width: 320px;
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        }
        
        .context-detail-header {
            background-color: #9c27b0;
            color: white;
            padding: 16px;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .context-detail-close {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .context-detail-content {
            padding: 16px;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .context-detail-section {
            margin-bottom: 16px;
        }
        
        .context-detail-title {
            font-weight: 500;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
        }
        
        .context-detail-title i {
            margin-right: 8px;
            color: #9c27b0;
        }
        
        .context-detail-info {
            background-color: #f5f5f5;
            padding: 12px;
            border-radius: 4px;
            font-size: 14px;
            color: #616161;
        }
        
        .context-detail-info p {
            margin-bottom: 8px;
        }
        
        .context-detail-info p:last-child {
            margin-bottom: 0;
        }
        
        .context-detail-info strong {
            color: #333;
        }
        
        .mini-preview {
            display: flex;
            background-color: white;
            border-radius: 24px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            padding: 4px;
            position: absolute;
            bottom: 56px;
            left: 16px;
        }
        
        .mini-preview-item {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 2px;
            color: white;
            font-size: 16px;
        }
        
        .mini-preview-item.user {
            background-color: #9c27b0;
        }
        
        .mini-preview-item.fortune {
            background-color: #ff9800;
        }
        
        .mini-preview-item.friend {
            background-color: #2196f3;
        }
        
        .mini-preview-item.team {
            background-color: #4caf50;
        }
        
        .mini-preview-item.plus {
            background: linear-gradient(135deg, #7b1fa2, #9c27b0);
            position: relative;
            overflow: hidden;
        }
        
        .sparkle {
            position: absolute;
            width: 4px;
            height: 4px;
            background-color: white;
            border-radius: 50%;
        }
        
        .sparkle-1 {
            top: 8px;
            left: 8px;
        }
        
        .sparkle-2 {
            bottom: 8px;
            right: 8px;
        }
        
        .sparkle-3 {
            top: 8px;
            right: 8px;
        }
        
        .annotations {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
        
        .annotation {
            background-color: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 10px 15px;
            border-radius: 0 4px 4px 0;
            font-size: 14px;
            flex: 1;
            min-width: 200px;
        }
        
        .annotation strong {
            color: #0d47a1;
            display: block;
            margin-bottom: 5px;
        }
        
        .tip {
            background-color: #ffebee;
            border-left: 4px solid #f44336;
        }
        
        .tip strong {
            color: #c62828;
        }
        
        .note {
            background-color: #e8f5e9;
            border-left: 4px solid #4caf50;
        }
        
        .note strong {
            color: #2e7d32;
        }
        
        .highlight-dot {
            position: absolute;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background-color: rgba(244, 67, 54, 0.8);
            box-shadow: 0 0 0 4px rgba(244, 67, 54, 0.4);
            z-index: 10;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(244, 67, 54, 0.4);
            }
            70% {
                transform: scale(1);
                box-shadow: 0 0 0 6px rgba(244, 67, 54, 0);
            }
            100% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(244, 67, 54, 0);
            }
        }
        
        .mobile-device-frame {
            background-color: #111;
            padding: 16px;
            border-radius: 32px;
            margin: 0 auto;
            max-width: 375px;
        }
        
        .mobile-screen {
            border-radius: 20px;
            overflow: hidden;
            background-color: white;
        }
        
        @media (max-width: 600px) {
            .mobile-device-frame {
                padding: 8px;
                border-radius: 20px;
            }
            
            .mobile-screen {
                border-radius: 16px;
            }
        }
    </style>
</head>
<body>
    <h1>チャットコンテキスト管理フロー</h1>
    
    <div class="flow-container">
        <!-- ステップ1: 初期状態 -->
        <div class="step">
            <div class="step-header">
                <div class="step-number">1</div>
                初期状態
            </div>
            <div class="step-content">
                <div class="step-description">
                    ユーザーは基本のチャット画面を見ています。上部のタグ領域には自分の情報が常に表示されています。
                </div>
                
                <div class="mobile-device-frame">
                    <div class="mobile-screen">
                        <div class="mockup">
                            <div class="mockup-header">
                                <div class="mockup-back-button">
                                    <span class="material-icons">arrow_back</span>
                                </div>
                                <div class="mockup-title">運勢相談</div>
                                <div class="mockup-badge">
                                    <span class="material-icons">people</span>
                                    <div class="mockup-badge-number">1</div>
                                </div>
                            </div>
                            
                            <div class="context-tags">
                                <div class="context-tag active">
                                    <i class="material-icons">person</i>
                                    自分
                                </div>
                            </div>
                            
                            <div class="chat-content">
                                <div class="message assistant">
                                    こんにちは。今日の運勢や個人的な質問について相談したいことがあれば、お気軽にお尋ねください。
                                </div>
                            </div>
                            
                            <div class="input-area">
                                <div class="context-button">
                                    <div class="context-button-wrapper">
                                        <div class="context-button-icon">
                                            <span class="material-icons">person</span>
                                        </div>
                                        <div class="context-button-plus">+</div>
                                    </div>
                                </div>
                                <div class="input-field">メッセージを入力...</div>
                                <div class="send-button">
                                    <span class="material-icons">send</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="annotations">
                    <div class="annotation">
                        <strong>コンテキスト管理の入り口</strong>
                        入力欄左側のアイコン＋ボタンは、コンテキスト情報を追加するための入り口です。ユーザーアイコンに小さな「+」マークを組み合わせることで、情報を追加できることを示しています。
                    </div>
                    
                    <div class="annotation note">
                        <strong>常に表示される情報</strong>
                        ユーザー自身の情報（「自分」タグ）は常に表示され、削除できないようになっています。これは基本コンテキストとして常にAIに提供されます。
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ステップ2: コンテキスト追加ボタン押下 -->
        <div class="step">
            <div class="step-header">
                <div class="step-number">2</div>
                コンテキスト追加ボタンを押す
            </div>
            <div class="step-content">
                <div class="step-description">
                    入力欄左側のボタンをタップすると、コンテキストプレビューが表示されます。ここには現在有効なコンテキスト情報が表示され、追加ボタンも含まれています。
                </div>
                
                <div class="mobile-device-frame">
                    <div class="mobile-screen">
                        <div class="mockup" style="position: relative;">
                            <div class="mockup-header">
                                <div class="mockup-back-button">
                                    <span class="material-icons">arrow_back</span>
                                </div>
                                <div class="mockup-title">運勢相談</div>
                                <div class="mockup-badge">
                                    <span class="material-icons">people</span>
                                    <div class="mockup-badge-number">1</div>
                                </div>
                            </div>
                            
                            <div class="context-tags">
                                <div class="context-tag active">
                                    <i class="material-icons">person</i>
                                    自分
                                </div>
                            </div>
                            
                            <div class="chat-content">
                                <div class="message assistant">
                                    こんにちは。今日の運勢や個人的な質問について相談したいことがあれば、お気軽にお尋ねください。
                                </div>
                            </div>
                            
                            <div class="mini-preview">
                                <div class="mini-preview-item user">
                                    <span class="material-icons">person</span>
                                </div>
                                <div class="mini-preview-item plus">
                                    <span class="material-icons">autorenew</span>
                                    <div class="sparkle sparkle-1"></div>
                                    <div class="sparkle sparkle-2"></div>
                                    <div class="sparkle sparkle-3"></div>
                                </div>
                            </div>
                            
                            <div class="input-area">
                                <div class="context-button">
                                    <div class="context-button-wrapper">
                                        <div class="context-button-icon">
                                            <span class="material-icons">person</span>
                                        </div>
                                        <div class="context-button-plus">+</div>
                                    </div>
                                </div>
                                <div class="input-field">メッセージを入力...</div>
                                <div class="send-button">
                                    <span class="material-icons">send</span>
                                </div>
                            </div>
                            
                            <div class="highlight-dot" style="top: 360px; left: 50px;"></div>
                        </div>
                    </div>
                </div>
                
                <div class="annotations">
                    <div class="annotation">
                        <strong>コンテキストプレビュー</strong>
                        タップすると現在設定されているコンテキスト情報のプレビューが表示されます。ここではユーザー自身の情報と「追加/切り替え」ボタンが表示されています。
                    </div>
                    
                    <div class="annotation tip">
                        <strong>操作のヒント</strong>
                        キラキラエフェクト付きのボタンは「autorenew」アイコンを使用しており、情報の切り替えや追加が可能であることを示しています。視覚的効果によって操作を促します。
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ステップ3: コンテキスト追加メニュー表示 -->
        <div class="step">
            <div class="step-header">
                <div class="step-number">3</div>
                コンテキストメニューを表示
            </div>
            <div class="step-content">
                <div class="step-description">
                    プレビュー内の「autorenew」ボタンをタップすると、カテゴリ分けされたコンテキスト選択メニューが表示されます。ここから追加したい情報を選択できます。
                </div>
                
                <div class="mobile-device-frame">
                    <div class="mobile-screen">
                        <div class="mockup" style="position: relative;">
                            <div class="mockup-header">
                                <div class="mockup-back-button">
                                    <span class="material-icons">arrow_back</span>
                                </div>
                                <div class="mockup-title">運勢相談</div>
                                <div class="mockup-badge">
                                    <span class="material-icons">people</span>
                                    <div class="mockup-badge-number">1</div>
                                </div>
                            </div>
                            
                            <div class="context-tags">
                                <div class="context-tag active">
                                    <i class="material-icons">person</i>
                                    自分
                                </div>
                            </div>
                            
                            <div class="chat-content">
                                <div class="message assistant">
                                    こんにちは。今日の運勢や個人的な質問について相談したいことがあれば、お気軽にお尋ねください。
                                </div>
                            </div>
                            
                            <div class="mini-preview">
                                <div class="mini-preview-item user">
                                    <span class="material-icons">person</span>
                                </div>
                                <div class="mini-preview-item plus">
                                    <span class="material-icons">autorenew</span>
                                    <div class="sparkle sparkle-1"></div>
                                    <div class="sparkle sparkle-2"></div>
                                    <div class="sparkle sparkle-3"></div>
                                </div>
                            </div>
                            
                            <div class="popup-menu">
                                <div class="popup-menu-tabs">
                                    <div class="popup-menu-tab active">友達</div>
                                    <div class="popup-menu-tab">運勢</div>
                                    <div class="popup-menu-tab">チーム</div>
                                </div>
                                <div class="popup-menu-content">
                                    <div class="popup-menu-item">
                                        <div class="popup-menu-item-icon friend">
                                            <span class="material-icons">face</span>
                                        </div>
                                        <div class="popup-menu-item-label">田中太郎</div>
                                    </div>
                                    <div class="popup-menu-item">
                                        <div class="popup-menu-item-icon friend">
                                            <span class="material-icons">face</span>
                                        </div>
                                        <div class="popup-menu-item-label">鈴木花子</div>
                                    </div>
                                    <div class="popup-menu-item">
                                        <div class="popup-menu-item-icon friend">
                                            <span class="material-icons">face</span>
                                        </div>
                                        <div class="popup-menu-item-label">山田健太</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="input-area">
                                <div class="context-button">
                                    <div class="context-button-wrapper">
                                        <div class="context-button-icon">
                                            <span class="material-icons">person</span>
                                        </div>
                                        <div class="context-button-plus">+</div>
                                    </div>
                                </div>
                                <div class="input-field">メッセージを入力...</div>
                                <div class="send-button">
                                    <span class="material-icons">send</span>
                                </div>
                            </div>
                            
                            <div class="highlight-dot" style="top: 300px; left: 125px;"></div>
                        </div>
                    </div>
                </div>
                
                <div class="annotations">
                    <div class="annotation">
                        <strong>カテゴリ分けされたメニュー</strong>
                        「友達」「運勢」「チーム」の3つのタブに分かれており、それぞれのカテゴリから情報を選択できます。タブ切り替えで表示内容が変わります。
                    </div>
                    
                    <div class="annotation note">
                        <strong>視覚的区別</strong>
                        各項目にはカテゴリに応じたアイコンと色が設定されており、一目で種類が分かるようになっています。友達は青、運勢はオレンジ、チームは緑のカラーコードです。
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ステップ4: 情報を選択（タップ） -->
        <div class="step">
            <div class="step-header">
                <div class="step-number">4</div>
                コンテキスト情報を選択
            </div>
            <div class="step-content">
                <div class="step-description">
                    メニューから「田中太郎」を選択します。選択した情報がコンテキストとして追加され、上部のタグ領域に表示されます。
                </div>
                
                <div class="mobile-device-frame">
                    <div class="mobile-screen">
                        <div class="mockup">
                            <div class="mockup-header">
                                <div class="mockup-back-button">
                                    <span class="material-icons">arrow_back</span>
                                </div>
                                <div class="mockup-title">運勢相談</div>
                                <div class="mockup-badge">
                                    <span class="material-icons">people</span>
                                    <div class="mockup-badge-number">2</div>
                                </div>
                            </div>
                            
                            <div class="context-tags">
                                <div class="context-tag active">
                                    <i class="material-icons">person</i>
                                    自分
                                </div>
                                <div class="context-tag">
                                    <i class="material-icons">face</i>
                                    田中太郎
                                    <span class="material-icons remove">close</span>
                                </div>
                            </div>
                            
                            <div class="chat-content">
                                <div class="message assistant">
                                    こんにちは。今日の運勢や個人的な質問について相談したいことがあれば、お気軽にお尋ねください。
                                </div>
                            </div>
                            
                            <div class="input-area">
                                <div class="context-button">
                                    <div class="context-button-wrapper">
                                        <div class="context-button-icon">
                                            <span class="material-icons">person</span>
                                        </div>
                                        <div class="context-button-plus">+</div>
                                    </div>
                                </div>
                                <div class="input-field">メッセージを入力...</div>
                                <div class="send-button">
                                    <span class="material-icons">send</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="annotations">
                    <div class="annotation">
                        <strong>コンテキスト情報の追加</strong>
                        選択した情報がタグとして上部に追加されます。このタグには削除ボタン（×）が含まれており、不要になったらいつでも削除できます。
                    </div>
                    
                    <div class="annotation note">
                        <strong>バッジ数字の更新</strong>
                        ヘッダー右上のバッジ数字が「2」に更新され、現在アクティブなコンテキスト情報の数を示しています。
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ステップ5: もう一つ情報を追加 -->
        <div class="step">
            <div class="step-header">
                <div class="step-number">5</div>
                さらに情報を追加
            </div>
            <div class="step-content">
                <div class="step-description">
                    同様の手順で「今日の運勢」情報も追加します。複数のコンテキスト情報を組み合わせることで、より詳細な相談が可能になります。
                </div>
                
                <div class="mobile-device-frame">
                    <div class="mobile-screen">
                        <div class="mockup" style="position: relative;">
                            <div class="mockup-header">
                                <div class="mockup-back-button">
                                    <span class="material-icons">arrow_back</span>
                                </div>
                                <div class="mockup-title">運勢相談</div>
                                <div class="mockup-badge">
                                    <span class="material-icons">people</span>
                                    <div class="mockup-badge-number">3</div>
                                </div>
                            </div>
                            
                            <div class="context-tags">
                                <div class="context-tag active">
                                    <i class="material-icons">person</i>
                                    自分
                                </div>
                                <div class="context-tag">
                                    <i class="material-icons">face</i>
                                    田中太郎
                                    <span class="material-icons remove">close</span>
                                </div>
                                <div class="context-tag">
                                    <i class="material-icons">today</i>
                                    今日の運勢
                                    <span class="material-icons remove">close</span>
                                </div>
                            </div>
                            
                            <div class="chat-content">
                                <div class="message assistant">
                                    こんにちは。今日の運勢や個人的な質問について相談したいことがあれば、お気軽にお尋ねください。
                                </div>
                                
                                <div class="message user">
                                    田中さんとの相性はどうですか？
                                </div>
                            </div>
                            
                            <div class="input-area">
                                <div class="context-button">
                                    <div class="context-button-wrapper">
                                        <div class="context-button-icon">
                                            <span class="material-icons">person</span>
                                        </div>
                                        <div class="context-button-plus">+</div>
                                    </div>
                                </div>
                                <div class="input-field">メッセージを入力...</div>
                                <div class="send-button">
                                    <span class="material-icons">send</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="annotations">
                    <div class="annotation">
                        <strong>複数コンテキストの組み合わせ</strong>
                        自分の情報、友人の情報、今日の運勢情報を組み合わせることで、AI回答の質と正確性が向上します。例えば「田中さんとの今日の相性」など、複合的な質問が可能になります。
                    </div>
                    
                    <div class="annotation tip">
                        <strong>使用例</strong>
                        「田中さんとの相性はどうですか？」「今日のチームでの運勢は？」「彼と一緒にプロジェクトを進めるべき？」などの質問が、コンテキスト情報を追加するだけで可能になります。
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ステップ6: コンテキスト詳細を確認 -->
        <div class="step">
            <div class="step-header">
                <div class="step-number">6</div>
                コンテキスト詳細を確認
            </div>
            <div class="step-content">
                <div class="step-description">
                    ヘッダー右上のコンテキストアイコンをタップすると、現在利用中のコンテキスト情報の詳細を確認できます。
                </div>
                
                <div class="mobile-device-frame">
                    <div class="mobile-screen">
                        <div class="mockup" style="position: relative;">
                            <div class="mockup-header">
                                <div class="mockup-back-button">
                                    <span class="material-icons">arrow_back</span>
                                </div>
                                <div class="mockup-title">運勢相談</div>
                                <div class="mockup-badge">
                                    <span class="material-icons">people</span>
                                    <div class="mockup-badge-number">3</div>
                                </div>
                            </div>
                            
                            <div class="context-tags">
                                <div class="context-tag active">
                                    <i class="material-icons">person</i>
                                    自分
                                </div>
                                <div class="context-tag">
                                    <i class="material-icons">face</i>
                                    田中太郎
                                    <span class="material-icons remove">close</span>
                                </div>
                                <div class="context-tag">
                                    <i class="material-icons">today</i>
                                    今日の運勢
                                    <span class="material-icons remove">close</span>
                                </div>
                            </div>
                            
                            <div class="context-detail-overlay">
                                <div class="context-detail-card">
                                    <div class="context-detail-header">
                                        <div>現在のコンテキスト情報</div>
                                        <div class="context-detail-close">
                                            <span class="material-icons">close</span>
                                        </div>
                                    </div>
                                    <div class="context-detail-content">
                                        <div class="context-detail-section">
                                            <div class="context-detail-title">
                                                <i class="material-icons">person</i>
                                                ユーザー情報
                                            </div>
                                            <div class="context-detail-info">
                                                <p><strong>名前：</strong> 佐藤健太</p>
                                                <p><strong>五行属性：</strong> 木</p>
                                                <p><strong>日主：</strong> 甲</p>
                                                <p><strong>格局：</strong> 従旺格（身強）</p>
                                                <p><strong>用神：</strong> 偏財（金）</p>
                                            </div>
                                        </div>
                                        
                                        <div class="context-detail-section">
                                            <div class="context-detail-title">
                                                <i class="material-icons">face</i>
                                                田中太郎
                                            </div>
                                            <div class="context-detail-info">
                                                <p><strong>五行属性：</strong> 火</p>
                                                <p><strong>日主：</strong> 丙</p>
                                                <p><strong>相性スコア：</strong> 78/100</p>
                                                <p><strong>関係性：</strong> 相生（木が火を生む）</p>
                                            </div>
                                        </div>
                                        
                                        <div class="context-detail-section">
                                            <div class="context-detail-title">
                                                <i class="material-icons">today</i>
                                                今日の運勢
                                            </div>
                                            <div class="context-detail-info">
                                                <p><strong>日付：</strong> 2025年4月23日</p>
                                                <p><strong>日柱：</strong> 戊子</p>
                                                <p><strong>運勢スコア：</strong> 78/100</p>
                                                <p><strong>ラッキーカラー：</strong> シルバー</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="annotations">
                    <div class="annotation">
                        <strong>詳細情報の確認</strong>
                        コンテキスト情報の詳細なデータを確認できるモーダル画面です。AIに提供されている情報の全容を確認できます。
                    </div>
                    
                    <div class="annotation note">
                        <strong>情報管理の透明性</strong>
                        ユーザーはいつでも現在AIに提供されている情報を確認できるため、透明性が保たれています。不要な情報は削除することも可能です。
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>